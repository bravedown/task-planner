<!doctype html>
<html class="has-navbar-fixed-bottom" lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Link to the jQuery Library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

  <!--Link to Bulma CSS Framework-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.0/css/bulma.min.css">


  <!-- Link to our external stylesheet-->
  <link rel="stylesheet" href="./assets/style.css">

  <title>Hello, world!</title>
</head>

<body>
  <!--Add buttons to initiate auth sequence and sign out-->
  <button id="authorize-button" style="display: none;">Authorize</button>
  <button id="signout-button" style="display: none;">Sign Out</button>

  <div id="content"></div>

  <script type="text/javascript">
    // Enter an API key from the Google API Console:
    //   https://console.developers.google.com/apis/credentials
    var apiKey = 'AIzaSyBWE3-IR_kJ2cJhUBSXDOrn99q2iDBbclc';

    // Enter the API Discovery Docs that describes the APIs you want to
    // access. In this example, we are accessing the People API, so we load
    // Discovery Doc found here: https://developers.google.com/people/api/rest/
    var discoveryDocs = ["https://people.googleapis.com/$discovery/rest?version=v1"];

    // Enter a client ID for a web application from the Google API Console:
    //   https://console.developers.google.com/apis/credentials?project=_
    // In your API Console project, add a JavaScript origin that corresponds
    //   to the domain where you will be running the script.
    var clientId = '471562969084-2pitk6edd9hha7d1n9nf66j33rc54psq.apps.googleusercontent.com';

    // Enter one or more authorization scopes. Refer to the documentation for
    // the API or https://developers.google.com/people/v1/how-tos/authorizing
    // for details.
    var scopes = 'profile';

    var authorizeButton = document.getElementById('authorize-button');
    var signoutButton = document.getElementById('signout-button');

    function handleClientLoad() {
      // Load the API client and auth2 library
      gapi.load('client:auth2', initClient);
    }

    function initClient() {
      gapi.client.init({
          apiKey: apiKey,
          discoveryDocs: discoveryDocs,
          clientId: clientId,
          scope: scopes
      }).then(function () {
        // Listen for sign-in state changes.
        gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);

        // Handle the initial sign-in state.
        updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());

        authorizeButton.onclick = handleAuthClick;
        signoutButton.onclick = handleSignoutClick;
      });
    }

    function updateSigninStatus(isSignedIn) {
      if (isSignedIn) {
        authorizeButton.style.display = 'none';
        signoutButton.style.display = 'block';
        makeApiCall();
      } else {
        authorizeButton.style.display = 'block';
        signoutButton.style.display = 'none';
      }
    }

    function handleAuthClick(event) {
      gapi.auth2.getAuthInstance().signIn();
    }

    function handleSignoutClick(event) {
      gapi.auth2.getAuthInstance().signOut();
    }

    // Load the API and make an API call.  Display the results on the screen.
    function makeApiCall() {
      gapi.client.people.people.get({
        'resourceName': 'people/me',
        'requestMask.includeField': 'person.names'
      }).then(function(resp) {
        var p = document.createElement('p');
        var name = resp.result.names[0].givenName;
        p.appendChild(document.createTextNode('Hello, '+name+'!'));
        document.getElementById('content').appendChild(p);
      });
    }
  </script>
  <script async defer src="https://apis.google.com/js/api.js" 
    onload="this.onload=function(){};handleClientLoad()" 
    onreadystatechange="if (this.readyState === 'complete') this.onload()">
  </script>
 
  <div class="modal">
    <div class="modal-background"></div>
    <div class="modal-content">
      <div class="card">
        <header class="card-header">
          <p class="card-header-title is-centered">
            Task
          </p>
        </header>
        <div class="card-content">
          <div class="content">
            <form>
              <div class="field">
                <div class="control">
                  <label class="label">Task Name</label>
                  <input class="input" type="text" placeholder="Task Name">
                </div>
              </div>
              <div class="field">
                <div class="control">
                  <label class="label">Category</label>
                  <div class="select">
                    <select>
                      <option>Daily Tasks</option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="field is-grouped">
                <div class="control">
                  <label class="label">Date</label>
                  <input type="datetime-local">
                </div>
              </div>
          </div>
        </div>
        <footer class="card-footer">
          <button class="button card-footer-item">Cancel</button>
          <input type="submit" value="Submit" class="button card-footer-item"></input>
        </footer>
        </form>
      </div>
      <button class="modal-close is-large" aria-label="close"></button>
    </div></div></div>
    
    <nav class="tabs navbar is-fullwidth is-boxed is-toggle is-fixed-bottom">
        <ul>
          <li>
            <a>
              <span>Tasks</span>
            </a>
          </li>
          <li>
            <a>
              <span>Calendar</span>
            </a>
          </li>
          <li>
            <a>
              <span>Schedule</span>

            </a>
          </li>
        </ul>
    </nav>


    <!--Link to external Javascript-->
    <!-- <script src="./assets/script.js"></script> -->
</body>

</html>